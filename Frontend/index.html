<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Calculadora</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</head>
<body>
<h1><center>Calculadora</center></h1>
<br>
      <div class="form-group">
        <label for="numero1">Numero 1:</label>
        <input class="form-control" type="text" id="numero1" name="numero1" maxlength="7" step="1" oninput="check(this)" value="0" required/><br>
		<label for="numero2">Numero 2:</label>
        <input class="form-control" type="text" id="numero2" name="numero2" maxlength="7" step="1" oninput="check(this)" value="0" required/><br>
        <center><button id="sumar" name="sumar" onclick="calcular()" class="btn btn-primary btn-lg btn-block" disabled="true">Sumar</button></center>
      </div><br>
	  <div id="erromsg" style="color:red;">
	  </div>
	  <div id="resultado" name="resultado" class="alert alert-primary" role="alert">
	  </div>
	  <script>
		function check(input) {
			input.value = input.value.replace(/[^0-9]/g, ''); 
			input.value = input.value.replace(/(\..*)\./g, '$1');
			var valor = input.value;
			if (valor == ""){
				input.value = 0
			}
			try{
				valor = parseInt(input.value);
			}
			catch{
				valor = 0;
			}
			input.value = valor;
			var suma = parseInt(document.getElementById("numero1").value)+parseInt(document.getElementById("numero2").value);
			if (suma <= 0) {
				document.getElementById("sumar").disabled = true;
				document.getElementById("erromsg").innerHTML="El valor de la suma debe ser mayor a 0";
			} 
			else{
				document.getElementById("sumar").disabled = false;
				document.getElementById("erromsg").innerHTML="";
			}
		  }

	function calcular()
	{
	var num1 = document.getElementById("numero1").value;
	var num2 = document.getElementById("numero2").value;
	var suma = parseInt(num1) + parseInt(num2);
	var data = {
		"num1": num1, "num2": num2
	}
	console.log(suma);
	$.ajax({
    type: 'POST',
	contentType: 'application/json',
    url:'http://localhost:44358/api/Operation/',
    data: JSON.stringify(data),
    success: function(data){
		$.each(data, function(index, item){
			if(index == "suma"){
				$('#resultado').html(item);
			}
			if(index == "estaEnFibo"){
				alert("Esta en serie Fibonacci: "+item);
			}
		})
    },
    error: function( request, textStatus, errorThrown ){
        console.log( errorThrown );
    }
});
	}
</script>
</body>
</html>
